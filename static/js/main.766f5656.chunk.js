(this["webpackJsonpmaking-quote"]=this["webpackJsonpmaking-quote"]||[]).push([[0],{10:function(e,t,a){e.exports={makerBlack:"black",makerWhite:"white",cardAddForm:"cardAddForm_cardAddForm__3pUEt",form:"cardAddForm_form___SOuE",firstLine:"cardAddForm_firstLine__2G2i6",fileInput:"cardAddForm_fileInput__AHtnu",author:"cardAddForm_author__843R_",theme:"cardAddForm_theme__LvV1a",file:"cardAddForm_file__1BVGt",fileInputBtn:"cardAddForm_fileInputBtn__252bu",quote:"cardAddForm_quote__38a1q",addBtn:"cardAddForm_addBtn__5owHM",loading:"cardAddForm_loading__3KkKi",spin:"cardAddForm_spin__3awv0"}},11:function(e,t,a){e.exports={makerBlack:"black",makerWhite:"white",cardEditForm:"cardEditForm_cardEditForm__2OYNb",form:"cardEditForm_form__1gq31",firstLine:"cardEditForm_firstLine__Q5_fP",fileInput:"cardEditForm_fileInput__9xwq9",author:"cardEditForm_author__BA5XY",theme:"cardEditForm_theme__3ccXk",file:"cardEditForm_file__FfiC0",fileInputBtn:"cardEditForm_fileInputBtn__25hdn",quote:"cardEditForm_quote__zYkG_",addBtn:"cardEditForm_addBtn__2lIRJ",loading:"cardEditForm_loading__2uvRd",spin:"cardEditForm_spin__2t7Ec"}},13:function(e,t,a){e.exports={makerWhite:"white",makerBlack:"black",makerColorful:"linear-gradient(90deg, rgba(251,251,255,1) 1%, rgba(237,237,237,1) 17%, rgba(121,123,126,1) 52%, rgba(113,115,116,1) 68%, rgba(66,66,66,1) 83%, rgba(48,48,48,1) 94%, rgba(53,58,59,1) 100%)",card:"card_card__waWOV",cardText:"card_cardText__2QrTc",pre:"card_pre__2UQB2",quote:"card_quote__1ztAn",author:"card_author__2CqE4",img:"card_img__Hb2Jt",white:"card_white__2fNPM",black:"card_black__wDpvl",colorful:"card_colorful__2TO-t"}},17:function(e,t,a){e.exports={makerBlack:"black",makerWhite:"white",login:"login_login__eXAy6",title:"login_title__2acyF",loginTitle:"login_loginTitle__nR8UV",loginInLogin:"login_loginInLogin__21NlN",button:"login_button__2lQwv"}},20:function(e,t,a){e.exports={makerBlack:"black",makerWhite:"white",makerGrey:"grey",container:"maker_container__mp8xx",logout:"maker_logout__1As1B",logoutBtn:"maker_logoutBtn__1nZyE",contents:"maker_contents__8rYhb",editor:"maker_editor__WetUl",preview:"maker_preview__khfyF"}},29:function(e,t,a){e.exports={makerBlack:"black",makerWhite:"white",footer:"footer_footer__39xzK",logo:"footer_logo__1mXu2"}},30:function(e,t,a){e.exports={makerBlack:"black",makerWhite:"white",header:"header_header__1sI9F",logo:"header_logo__1CY7I"}},33:function(e,t,a){e.exports={container:"editor_container__1xl4J"}},37:function(e,t,a){e.exports={title:"preview_title__3t-no"}},44:function(e,t,a){},45:function(e,t,a){e.exports={App:"App_App__KCE4N","App-logo":"App_App-logo__1EmWm","App-logo-spin":"App_App-logo-spin__3zcAv","App-header":"App_App-header__2DWnI","App-link":"App_App-link__eCF3T"}},58:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(35),i=a.n(c),o=(a(44),a(38)),s=a(5),l=(a(45),a(29)),d=a.n(l),u=a(1),j=Object(r.memo)((function(e){return Object(u.jsx)("div",{className:d.a.footer,children:Object(u.jsx)("div",{className:d.a.logo,children:"Copyright 2021. heo. All right reserved"})})})),m=a(30),h=a.n(m),f=Object(r.memo)((function(e){return Object(u.jsx)("div",{className:h.a.header,children:Object(u.jsx)("div",{className:h.a.logo,children:"Making Quote"})})})),_=a(17),b=a.n(_),p=function(e){var t=e.authService,a=Object(s.f)(),n=function(e){a.push({pathname:"/maker",state:{id:e}})},c=function(e){var a=e.target.innerText;t.login(a).then((function(e){return n(e.user.uid)}))};return Object(r.useEffect)((function(){t.onAuthChanged((function(e){return e&&n(e.uid)}))})),Object(u.jsxs)("div",{className:b.a.container,children:[Object(u.jsx)(f,{}),Object(u.jsxs)("section",{className:b.a.login,children:[Object(u.jsxs)("div",{className:b.a.title,children:[Object(u.jsx)("p",{children:"The wise quote is by no means a new story, but it is always comforting."}),"- Gustave Flaubert"]}),Object(u.jsxs)("div",{className:b.a.loginInLogin,children:[Object(u.jsx)("div",{className:b.a.loginTitle,children:"Login"}),Object(u.jsx)("button",{className:b.a.button,onClick:c,children:"Google"}),Object(u.jsx)("button",{className:b.a.button,onClick:c,children:"Github"})]})]}),Object(u.jsx)(j,{})]})},O=a(16),g=a(15),x=a(25),v=(a(51),a(53),x.a.initializeApp({apiKey:"AIzaSyAqZr4bUZ5l2tmDqf1WncrcECZajvfYJNk",authDomain:"making-quote.firebaseapp.com",projectId:"making-quote",storageBucket:"making-quote.appspot.com",messagingSenderId:"412351070411",appId:"1:412351070411:web:81002793b33a6b5829db4e"})),k=v.auth(),N=v.database(),w=new x.a.auth.GoogleAuthProvider,A=new x.a.auth.GithubAuthProvider,F=a(14),C=a.n(F),B=a(21),y=a(10),E=a.n(y),I=function(e){var t=e.updateCard,a=e.imageUploader,n=Object(r.useState)(),c=Object(g.a)(n,2),i=c[0],o=c[1],s=Object(r.useState)(),l=Object(g.a)(s,2),d=l[0],j=l[1],m=Object(r.useState)(!1),h=Object(g.a)(m,2),f=h[0],_=h[1],b=Object(r.useRef)(),p=Object(r.useRef)(),O=Object(r.useRef)(),x=Object(r.useRef)(),v=Object(r.useRef)(),k=function(){var e=Object(B.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,a.upload(t.target.files[0]);case 3:r=e.sent,console.log(r),o(r.url),j(r.original_filename),_(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:E.a.cardAddForm,children:Object(u.jsxs)("form",{ref:v,className:E.a.form,children:[Object(u.jsxs)("div",{className:E.a.firstLine,children:[Object(u.jsx)("input",{ref:b,className:E.a.author,name:"author",type:"text",placeholder:"Author"}),Object(u.jsxs)("select",{ref:p,className:E.a.theme,children:[Object(u.jsx)("option",{value:"white",children:"white"}),Object(u.jsx)("option",{value:"black",children:"black"}),Object(u.jsx)("option",{value:"colorful",children:"colorful"})]}),Object(u.jsxs)("div",{className:E.a.file,children:[f&&Object(u.jsx)("div",{className:E.a.loading}),Object(u.jsx)("input",{ref:x,className:E.a.fileInput,onChange:k,type:"file"}),!f&&Object(u.jsxs)("button",{className:E.a.fileInputBtn,onClick:function(e){e.preventDefault(),x.current.click()},children:[" ",d||"Upload Img"," "]})]})]}),Object(u.jsx)("textarea",{ref:O,className:E.a.quote,name:"quote",cols:"30",rows:"10",placeholder:"Your Quote"}),Object(u.jsx)("button",{className:E.a.addBtn,onClick:function(e){e.preventDefault();var a={id:Date.now(),author:b.current.value,quote:O.current.value,theme:p.current.value,fileName:d||"No File",fileURL:i||"https://res.cloudinary.com/drhfkpavq/image/upload/v1616651072/samples/animals/cat.jpg"};t(a),v.current.reset()},name:"addBtn",children:"Add"})]})})},q=a(24),S=a(11),U=a.n(S),L=function(e){var t=e.card,a=e.updateCard,n=e.imageUploader,c=e.deleteCard,i=Object(r.useState)(!1),o=Object(g.a)(i,2),s=o[0],l=o[1],d=Object(r.useRef)(),j=function(e){a(Object(O.a)(Object(O.a)({},t),{},Object(q.a)({},e.currentTarget.name,e.currentTarget.value)))},m=function(){var e=Object(B.a)(C.a.mark((function e(r){var c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,n.upload(r.target.files[0]);case 3:c=e.sent,a(Object(O.a)(Object(O.a)({},t),{},{fileName:c.original_filename,fileURL:c.url})),l(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:U.a.cardEditForm,children:Object(u.jsxs)("form",{className:U.a.form,children:[Object(u.jsxs)("div",{className:U.a.firstLine,children:[Object(u.jsx)("input",{onChange:j,className:U.a.author,name:"author",type:"text",value:t.author}),Object(u.jsxs)("select",{onChange:j,className:U.a.theme,value:t.theme,name:"theme",children:[Object(u.jsx)("option",{value:"white",children:"white"}),Object(u.jsx)("option",{value:"black",children:"black"}),Object(u.jsx)("option",{value:"colorful",children:"colorful"})]}),Object(u.jsxs)("div",{className:U.a.file,children:[s&&Object(u.jsx)("div",{className:U.a.loading}),Object(u.jsx)("input",{onChange:m,ref:d,className:U.a.fileInput,name:"file",type:"file"}),!s&&Object(u.jsx)("button",{className:U.a.fileInputBtn,onClick:function(e){e.preventDefault(),d.current.click()},children:t.fileName})]})]}),Object(u.jsx)("textarea",{onChange:j,className:U.a.quote,name:"quote",cols:"30",rows:"10",value:t.quote}),Object(u.jsx)("button",{className:U.a.addBtn,onClick:function(){c(t)},ame:"deleteBtn",children:"Delete"})]})})},T=a(33),W=a.n(T),D=function(e){e.userId,e.dataBase;var t=e.cards,a=e.keys,r=e.updateCard,n=e.imageUploader,c=e.deleteCard;return Object(u.jsxs)("section",{className:W.a.container,children:[Object(u.jsx)("h1",{className:W.a.title,children:" Edit"}),a.map((function(e){return Object(u.jsx)(L,{card:t[e],updateCard:r,imageUploader:n,deleteCard:c},e)})),Object(u.jsx)(I,{updateCard:r,imageUploader:n})]})},R=a(13),G=a.n(R),P=Object(r.memo)((function(e){var t=e.card,a=t.quote,r=t.author,n=t.theme,c=t.fileURL;return Object(u.jsxs)("section",{className:"".concat(G.a.card," ").concat(z(n)),children:[Object(u.jsxs)("div",{className:G.a.cardText,children:[Object(u.jsx)("div",{className:G.a.quote,children:Object(u.jsx)("pre",{className:G.a.pre,children:a})}),Object(u.jsxs)("div",{className:G.a.author,children:["- ",r]})]}),Object(u.jsx)("img",{className:G.a.img,src:c||"/images/default_logo.png",alt:"img"})]})})),z=function(e){switch(e){case"white":return G.a.white;case"black":return G.a.black;case"colorful":return G.a.colorful;default:throw new Error("undefined theme : ".concat(e))}},Y=P,J=a(37),Q=a.n(J),K=function(e){var t=e.cards,a=e.keys;return Object(u.jsxs)("section",{className:Q.a.title,children:[Object(u.jsx)("h1",{children:"Preview"}),a.map((function(e){return Object(u.jsx)(Y,{card:t[e]},e)}))]})},M=a(20),V=a.n(M),X=function(e){var t=e.authService,a=e.imageUploader,n=e.dataBase,c=Object(s.f)().location.state.id,i=Object(r.useState)({}),o=Object(g.a)(i,2),l=o[0],d=o[1],m=Object(r.useState)(c&&c),h=Object(g.a)(m,2),_=h[0],b=h[1];n.syncData();var p=Object(s.f)();return Object(r.useEffect)((function(){k.onAuthStateChanged((function(e){e?e&&b(e.uid):p.push("/")}))}),[p,_,t]),Object(r.useEffect)((function(){var e=n.syncData(_,(function(e){return d(e)}));return function(){return e()}}),[_,n]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(f,{}),Object(u.jsxs)("section",{className:V.a.container,children:[Object(u.jsx)("div",{className:V.a.logout,children:Object(u.jsx)("button",{className:V.a.logoutBtn,onClick:function(){t.logout()},children:"Logout"})}),Object(u.jsxs)("div",{className:V.a.contents,children:[Object(u.jsx)("div",{className:V.a.editor,children:Object(u.jsx)(D,{cards:l,keys:Object.keys(l),updateCard:function(e){d((function(t){var a=Object(O.a)({},t);return a[e.id]=e,a})),n.saveCard(_,e)},deleteCard:function(e){d((function(t){var a=Object(O.a)({},t);return delete a[e.id],a})),n.deleteCard(_,e)},imageUploader:a,userId:_,dataBase:n})}),Object(u.jsx)("div",{className:V.a.preview,children:Object(u.jsx)(K,{cards:l,keys:Object.keys(l)})})]})]}),Object(u.jsx)(j,{})]})};var Z=function(e){var t=e.authService,a=e.imageUploader,r=e.dataBase;return Object(u.jsx)(o.a,{children:Object(u.jsxs)(s.c,{children:[Object(u.jsx)(s.a,{exact:!0,path:"/",children:Object(u.jsx)(p,{authService:t})}),Object(u.jsx)(s.a,{path:"/maker",children:Object(u.jsx)(X,{authService:t,imageUploader:a,dataBase:r})})]})})},H=a(22),$=function e(){Object(H.a)(this,e),this.login=function(e){switch(e){case"Google":return k.signInWithPopup(w);case"Github":return k.signInWithPopup(A);default:throw new Error("undefined Provider:".concat(e))}},this.logout=function(){k.signOut()},this.onAuthChanged=function(e){k.onAuthStateChanged((function(t){e(t)}))}},ee=a(39),te=function(){function e(){Object(H.a)(this,e)}return Object(ee.a)(e,[{key:"upload",value:function(){var e=Object(B.a)(C.a.mark((function e(t){var a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),a.append("upload_preset","zfoasevz"),e.next=5,fetch("https://api.cloudinary.com/v1_1/drhfkpavq/upload",{method:"POST",body:a});case 5:return r=e.sent,e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ae=function e(){Object(H.a)(this,e),this.syncData=function(e,t){var a=N.ref("".concat(e,"/cards"));return a.on("value",(function(e){var a=e.val();a&&t(a)})),function(){return a.off()}},this.saveCard=function(e,t){N.ref("".concat(e,"/cards/").concat(t.id)).set(t)},this.deleteCard=function(e,t){N.ref("".concat(e,"/cards/").concat(t.id)).remove()}},re=new $,ne=new te,ce=new ae;i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(Z,{authService:re,imageUploader:ne,dataBase:ce})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.766f5656.chunk.js.map